{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\paste\\\\Desktop\\\\Hyperiondev\\\\Web Development with React and Express\\\\Task 21\\\\iTunes Favourites\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\paste\\\\Desktop\\\\Hyperiondev\\\\Web Development with React and Express\\\\Task 21\\\\iTunes Favourites\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\paste\\\\Desktop\\\\Hyperiondev\\\\Web Development with React and Express\\\\Task 21\\\\iTunes Favourites\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\paste\\\\Desktop\\\\Hyperiondev\\\\Web Development with React and Express\\\\Task 21\\\\iTunes Favourites\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\paste\\\\Desktop\\\\Hyperiondev\\\\Web Development with React and Express\\\\Task 21\\\\iTunes Favourites\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\paste\\\\Desktop\\\\Hyperiondev\\\\Web Development with React and Express\\\\Task 21\\\\iTunes Favourites\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\paste\\\\Desktop\\\\Hyperiondev\\\\Web Development with React and Express\\\\Task 21\\\\iTunes Favourites\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport logo from \"./musicapplogo.svg\";\nimport Favourites from './components/Favourites';\nimport SearchResults from './components/SearchResults'; // Show Search Results\n\nfunction showSearchResults() {\n  var searchResultsContainer = document.getElementById(\"search-results-container\");\n  searchResultsContainer.style.display = \"block\";\n} // Change Button To Added\n\n\nfunction addedButton(pressedButton) {\n  pressedButton.classList.add('added');\n  pressedButton.innerHTML = 'Added';\n  pressedButton.disabled = true;\n}\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.removeFavouriteHandler = _this.removeFavouriteHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addFavouriteHandler = _this.addFavouriteHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.searchHandler = _this.searchHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectChangeHandler = _this.selectChangeHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      error: null,\n      isLoaded: false,\n      value: \"\",\n      message: \"\",\n      searchResults: {\n        resultCount: 0,\n        results: []\n      },\n      searchTerm: ' ',\n      searchMedia: 'all',\n      favourites: []\n    };\n    return _this;\n  } // Search Form Input Changes Handler\n\n\n  _createClass(App, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        searchTerm: event.target.value\n      });\n    } // Search Form Select Changes Handler\n\n  }, {\n    key: \"selectChangeHandler\",\n    value: function selectChangeHandler(event) {\n      this.setState({\n        searchMedia: event.target.value\n      });\n    } // ADD ITEM TO FAVOURITES HANDLER\n\n  }, {\n    key: \"addFavouriteHandler\",\n    value: function addFavouriteHandler(event) {\n      var _this2 = this;\n\n      var searchResults = this.state.searchResults.results;\n      var clickedTrackToAdd = event.target.getAttribute('data-key');\n      var favouriteToAdd = {};\n\n      for (var i = 0; i < searchResults.length; i++) {\n        if (searchResults[i].trackId == clickedTrackToAdd) {\n          favouriteToAdd = searchResults[i];\n        }\n      }\n\n      fetch(\"/api/favourites/\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(favouriteToAdd)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        _this2.setState({\n          favourites: result.favourites,\n          isLoaded: true\n        });\n      }, function (error) {\n        console.log(error);\n\n        _this2.setState({\n          error: error\n        });\n      });\n      addedButton(event.target);\n    } // Remove Item From Favourites Handler\n\n  }, {\n    key: \"removeFavouriteHandler\",\n    value: function removeFavouriteHandler(e) {\n      var _this3 = this;\n\n      console.log(e.target.getAttribute('data-key'));\n      fetch(\"/api/favourites/\".concat(e.target.getAttribute('data-key')), {\n        method: 'DELETE'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        _this3.setState({\n          favourites: result.favourites,\n          message: \"Track has been removed.\"\n        });\n      }, function (error) {\n        console.log(error);\n\n        _this3.setState({\n          error: error\n        });\n      });\n    } // Search Submit Handler\n\n  }, {\n    key: \"searchHandler\",\n    value: function searchHandler(event) {\n      var _this4 = this;\n\n      event.preventDefault();\n      var searchInput = this.state.searchTerm;\n      var searchMedia = this.state.searchMedia;\n\n      if (searchInput == '') {\n        searchInput = ' ';\n      }\n\n      fetch(\"/api/search/\".concat(searchInput, \"/\").concat(searchMedia)).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        _this4.setState({\n          searchResults: result\n        }); // console.log(this.state.searchResults);\n\n\n        showSearchResults();\n      }, function (error) {\n        console.log(error);\n\n        _this4.setState({\n          error: error\n        });\n      });\n    } // Get Favourites on Initial Mount\n\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this5 = this;\n\n      fetch(\"/api/favourites\").then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        _this5.setState({\n          favourites: result.favourites,\n          isLoaded: true\n        });\n      }, function (error) {\n        console.log(error);\n\n        _this5.setState({\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          error = _this$state.error,\n          isLoaded = _this$state.isLoaded;\n\n      if (error) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, \"Error: \", error.message);\n      } else if (!isLoaded) {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"spinner-grow text-light\",\n          role: \"status\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"sr-only\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, \"Loading...\")));\n      } else return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"main-logo\",\n        src: logo,\n        alt: \"Music App Logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        onSubmit: this.searchHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-sm-7 mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Search..\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-12 col-sm-3 mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        className: \"form-control\",\n        onChange: this.selectChangeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"all\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"All\"), React.createElement(\"option\", {\n        value: \"movie\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"Movie\"), React.createElement(\"option\", {\n        value: \"podcast\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"Podcast\"), React.createElement(\"option\", {\n        value: \"music\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, \"Music\"), React.createElement(\"option\", {\n        value: \"musicVideo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"Music Video\"), React.createElement(\"option\", {\n        value: \"audiobook\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"Audio Book\"), React.createElement(\"option\", {\n        value: \"shortFilm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Short Film\"), React.createElement(\"option\", {\n        value: \"tvShow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"TV Show\"), React.createElement(\"option\", {\n        value: \"software\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Software\"), React.createElement(\"option\", {\n        value: \"ebook\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"Ebook\"))), React.createElement(\"div\", {\n        className: \"col-12 col-sm-2 mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary btn-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"Search\")))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }), \"SEARCH RESULTS\", React.createElement(\"div\", {\n        id: \"search-results-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-center text-light mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"Search Results\"), React.createElement(\"p\", {\n        className: \"text-center text-light mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Results Found: \", this.state.searchResults.resultCount)), React.createElement(SearchResults, {\n        searchResults: this.state.searchResults.results,\n        addFavouriteHandler: this.addFavouriteHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-center text-light mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \"Favourites List\")), React.createElement(Favourites, {\n        favourites: this.state.favourites,\n        removeFavouriteHandler: this.removeFavouriteHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\paste\\Desktop\\Hyperiondev\\Web Development with React and Express\\Task 21\\iTunes Favourites\\client\\src\\App.js"],"names":["React","Component","Favourites","SearchResults","showSearchResults","searchResultsContainer","document","getElementById","style","display","addedButton","pressedButton","classList","add","innerHTML","disabled","App","props","handleChange","bind","removeFavouriteHandler","addFavouriteHandler","searchHandler","selectChangeHandler","state","error","isLoaded","value","message","searchResults","resultCount","results","searchTerm","searchMedia","favourites","event","setState","target","clickedTrackToAdd","getAttribute","favouriteToAdd","i","length","trackId","fetch","method","headers","body","JSON","stringify","then","res","json","result","console","log","e","preventDefault","searchInput","logo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport logo from './musicapplogo.svg';\n\nimport Favourites from './components/Favourites';\nimport SearchResults from './components/SearchResults';\n\n\n\n// Show Search Results\nfunction showSearchResults() {\n    var searchResultsContainer = document.getElementById(\"search-results-container\");\n    searchResultsContainer.style.display = \"block\";\n}\n// Change Button To Added\nfunction addedButton(pressedButton) {\n    pressedButton.classList.add('added');\n    pressedButton.innerHTML = 'Added';\n    pressedButton.disabled = true;\n}\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n        this.removeFavouriteHandler = this.removeFavouriteHandler.bind(this);\n        this.addFavouriteHandler = this.addFavouriteHandler.bind(this);\n        this.searchHandler = this.searchHandler.bind(this);\n        this.selectChangeHandler = this.selectChangeHandler.bind(this);\n        this.state = {\n            error: null,\n            isLoaded: false,\n            value: \"\",\n            message: \"\",\n            searchResults: {\n                resultCount: 0,\n                results: []\n            },\n            searchTerm: ' ',\n            searchMedia: 'all',\n            favourites: []\n        };\n\n    }\n\n    // Search Form Input Changes Handler\n    handleChange(event) {\n\n        this.setState({\n            searchTerm: event.target.value\n\n        });\n\n    }\n\n    // Search Form Select Changes Handler\n    selectChangeHandler(event) {\n\n        this.setState({\n            searchMedia: event.target.value\n        });\n\n    }\n\n    // ADD ITEM TO FAVOURITES HANDLER\n    addFavouriteHandler(event) {\n\n        let searchResults = this.state.searchResults.results;\n        let clickedTrackToAdd = event.target.getAttribute('data-key');\n\n        let favouriteToAdd = {};\n\n        for (let i = 0; i < searchResults.length; i++) {\n            if (searchResults[i].trackId == clickedTrackToAdd) {\n                favouriteToAdd = searchResults[i];\n            }\n        }\n\n        fetch(`/api/favourites/`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(favouriteToAdd) })\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    this.setState({\n                        favourites: result.favourites,\n                        isLoaded: true\n                    });\n\n                },\n                (error) => {\n                    console.log(error);\n                    this.setState({\n                        error\n                    });\n                }\n            )\n\n        addedButton(event.target);\n    }\n\n\n    // Remove Item From Favourites Handler\n    removeFavouriteHandler(e) {\n\n        console.log(e.target.getAttribute('data-key'))\n\n        fetch(`/api/favourites/${e.target.getAttribute('data-key')}`, { method: 'DELETE' })\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    this.setState({\n                        favourites: result.favourites,\n                        message: \"Track has been removed.\"\n                    });\n\n                },\n                (error) => {\n                    console.log(error);\n                    this.setState({\n                        error\n                    });\n                }\n            )\n\n    }\n\n    // Search Submit Handler\n    searchHandler(event) {\n\n        event.preventDefault();\n\n        let searchInput = this.state.searchTerm;\n        let searchMedia = this.state.searchMedia;\n\n        if (searchInput == '') {\n            searchInput = ' ';\n        }\n\n        fetch(`/api/search/${searchInput}/${searchMedia}`)\n            .then(res => res.json())\n            .then(\n                (result) => {\n\n                    this.setState({\n                        searchResults: result\n                    });\n                    // console.log(this.state.searchResults);\n                    showSearchResults();\n                },\n                (error) => {\n                    console.log(error);\n                    this.setState({\n                        error\n                    });\n                }\n            )\n    }\n\n\n    // Get Favourites on Initial Mount\n    componentDidMount() {\n\n        fetch(\"/api/favourites\")\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    this.setState({\n                        favourites: result.favourites,\n                        isLoaded: true\n                    }\n\n                    );\n                },\n                (error) => {\n                    console.log(error);\n                    this.setState({\n                        error\n                    });\n                }\n            )\n\n    }\n\n\n    render() {\n\n\n        const { error, isLoaded } = this.state;\n        if (error) {\n            return <div>Error: {error.message}</div>;\n        } else if (!isLoaded) {\n            return (\n                <div className=\"App\">\n                    <div className=\"spinner-grow text-light\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                    </div>\n                </div>\n            )\n        } else\n            return (\n                <div className=\"App\">\n\n\n\n                    <div className=\"container\">\n\n                        <img id=\"main-logo\" src={logo} alt=\"Music App Logo\" />\n\n                        {/* SEARCH FORM */}\n\n                        <form onSubmit={this.searchHandler}>\n                            <div className=\"form-row\">\n                                <div className=\"col-12 col-sm-7 mb-3\">\n                                    <input type=\"text\" className=\"form-control\" placeholder=\"Search..\" onChange={this.handleChange} />\n                                </div>\n                                <div className=\"col-12 col-sm-3 mb-3\">\n                                    <select className=\"form-control\" onChange={this.selectChangeHandler}>\n                                        <option value=\"all\">All</option>\n                                        <option value=\"movie\">Movie</option>\n                                        <option value=\"podcast\">Podcast</option>\n                                        <option value=\"music\">Music</option>\n                                        <option value=\"musicVideo\">Music Video</option>\n                                        <option value=\"audiobook\">Audio Book</option>\n                                        <option value=\"shortFilm\">Short Film</option>\n                                        <option value=\"tvShow\">TV Show</option>\n                                        <option value=\"software\">Software</option>\n                                        <option value=\"ebook\">Ebook</option>\n                                    </select>\n                                </div>\n                                <div className=\"col-12 col-sm-2 mb-3\">\n                                    <button type=\"submit\" className=\"btn btn-primary btn-block\">Search</button>\n                                </div>\n                            </div>\n                        </form>\n\n                        <hr />\n\n                        SEARCH RESULTS\n                        <div id=\"search-results-container\">\n\n                            <div className=\"col-12\">\n                                <h2 className=\"text-center text-light mb-3\">Search Results</h2>\n                                <p className=\"text-center text-light mb-3\">Results Found: {this.state.searchResults.resultCount}</p>\n                            </div>\n\n\n                            <SearchResults searchResults={this.state.searchResults.results} addFavouriteHandler={this.addFavouriteHandler} />\n\n\n                            <hr />\n\n                        </div>\n\n\n\n                        {/* FAVOURITES LIST */}\n                        <div className=\"col-12\">\n                            <h2 className=\"text-center text-light mb-3\">Favourites List</h2>\n                        </div>\n\n                        <Favourites favourites={this.state.favourites} removeFavouriteHandler={this.removeFavouriteHandler} />\n\n\n\n\n\n                    </div>\n\n\n\n\n\n                </div>\n            );\n\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}