(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/musicapplogo.2f1e05c3.svg"},15:function(e,t,a){e.exports=a(37)},20:function(e,t,a){},21:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(13),o=a.n(s),l=(a(20),a(2)),i=a(3),c=a(5),u=a(4),d=a(6),m=a(1),h=(a(21),a(14)),v=a.n(h),b=a(9),p=a.n(b),f=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.favourites;return r.a.createElement("div",null,r.a.createElement(p.a,{dots:!0,infinite:!1,speed:500,slidesToShow:4,slidesToScroll:4,initialSlide:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:1}}]},t.map(function(t){return r.a.createElement("div",{className:"text-center favourite-slide",key:t.trackId},r.a.createElement("div",{className:"text-center mb-3 thumbnail-container"},r.a.createElement("img",{src:t.artworkUrl100,className:"img-fluid rounded mx-auto",alt:"Title Artwork"})),r.a.createElement("h4",{className:"text-light"},t.artistName),r.a.createElement("p",{className:"text-light"},t.trackName),r.a.createElement("p",{className:"text-light"},t.url),r.a.createElement("button",{className:"btn btn-dark btn btn-dark col-12 mb-3 align-bottom",onClick:e.props.removeFavouriteHandler,type:"button","data-key":t.trackId},"REMOVE FROM FAVOURITES"))})))}}]),t}(n.Component),E=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.searchResults;return r.a.createElement("div",null,r.a.createElement(p.a,{dots:!0,infinite:!1,speed:500,slidesToShow:4,slidesToScroll:4,initialSlide:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:1}}]},t.map(function(t){return r.a.createElement("div",{className:"text-center search-slide",key:t.trackId},r.a.createElement("div",{className:"text-center mb-3 thumbnail-container"},r.a.createElement("img",{src:t.artworkUrl100,className:"img-fluid rounded mx-auto",alt:"Title Artwork"})),r.a.createElement("h4",{className:"text-light"},t.artistName),r.a.createElement("p",{className:"text-light"},t.trackName),r.a.createElement("p",{className:"text-light"},t.url),r.a.createElement("button",{className:"btn btn-dark col-12 mb-3",onClick:e.props.addFavouriteHandler,type:"button","data-key":t.trackId},"ADD TO COLLECTION"))})))}}]),t}(n.Component);var g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.removeFavouriteHandler=a.removeFavouriteHandler.bind(Object(m.a)(Object(m.a)(a))),a.addFavouriteHandler=a.addFavouriteHandler.bind(Object(m.a)(Object(m.a)(a))),a.searchHandler=a.searchHandler.bind(Object(m.a)(Object(m.a)(a))),a.selectChangeHandler=a.selectChangeHandler.bind(Object(m.a)(Object(m.a)(a))),a.state={error:null,isLoaded:!1,value:"",message:"",searchResults:{resultCount:0,results:[]},searchTerm:" ",searchMedia:"all",favourites:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"selectChangeHandler",value:function(e){this.setState({searchMedia:e.target.value})}},{key:"addFavouriteHandler",value:function(e){for(var t,a=this,n=this.state.searchResults.results,r=e.target.getAttribute("data-key"),s={},o=0;o<n.length;o++)n[o].trackId==r&&(s=n[o]);fetch("/api/favourites/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){a.setState({favourites:e.favourites,isLoaded:!0})},function(e){console.log(e),a.setState({error:e})}),(t=e.target).classList.add("added"),t.innerHTML="Added",t.disabled=!0}},{key:"removeFavouriteHandler",value:function(e){var t=this;console.log(e.target.getAttribute("data-key")),fetch("/api/favourites/".concat(e.target.getAttribute("data-key")),{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){t.setState({favourites:e.favourites,message:"Track has been removed."})},function(e){console.log(e),t.setState({error:e})})}},{key:"searchHandler",value:function(e){var t=this;e.preventDefault();var a=this.state.searchTerm,n=this.state.searchMedia;""==a&&(a=" "),fetch("/api/search/".concat(a,"/").concat(n)).then(function(e){return e.json()}).then(function(e){t.setState({searchResults:e}),document.getElementById("search-results-container").style.display="block"},function(e){console.log(e),t.setState({error:e})})}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/favourites").then(function(e){return e.json()}).then(function(t){e.setState({favourites:t.favourites,isLoaded:!0})},function(t){console.log(t),e.setState({error:t})})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoaded;return t?r.a.createElement("div",null,"Error: ",t.message):a?r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("img",{id:"main-logo",src:v.a,alt:"Music App Logo"}),r.a.createElement("form",{onSubmit:this.searchHandler},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-12 col-sm-7 mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search..",onChange:this.handleChange})),r.a.createElement("div",{className:"col-12 col-sm-3 mb-3"},r.a.createElement("select",{className:"form-control",onChange:this.selectChangeHandler},r.a.createElement("option",{value:"all"},"All"),r.a.createElement("option",{value:"movie"},"Movie"),r.a.createElement("option",{value:"podcast"},"Podcast"),r.a.createElement("option",{value:"music"},"Music"),r.a.createElement("option",{value:"musicVideo"},"Music Video"),r.a.createElement("option",{value:"audiobook"},"Audio Book"),r.a.createElement("option",{value:"shortFilm"},"Short Film"),r.a.createElement("option",{value:"tvShow"},"TV Show"),r.a.createElement("option",{value:"software"},"Software"),r.a.createElement("option",{value:"ebook"},"Ebook"))),r.a.createElement("div",{className:"col-12 col-sm-2 mb-3"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Search")))),r.a.createElement("hr",null),"SEARCH RESULTS",r.a.createElement("div",{id:"search-results-container"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center text-light mb-3"},"Search Results"),r.a.createElement("p",{className:"text-center text-light mb-3"},"Results Found: ",this.state.searchResults.resultCount)),r.a.createElement(E,{searchResults:this.state.searchResults.results,addFavouriteHandler:this.addFavouriteHandler}),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center text-light mb-3"},"Favourites List")),r.a.createElement(f,{favourites:this.state.favourites,removeFavouriteHandler:this.removeFavouriteHandler}))):r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"spinner-grow text-light",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.0714121b.chunk.js.map